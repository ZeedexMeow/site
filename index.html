<!DOCTYPE html>

<head>
    <title>zeedex</title>
    <link rel="icon" type="image/x-icon" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <meta name="title" content="zeedex">
    <meta name="description" content="shark">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://zeedex.eu/">
    <meta property="og:title" content="zeedex">
    <meta property="og:description" content="shark">
    <meta property="og:image" content="https://zeedex.eu/blahajcat.jpg">
</head>

<body lang="en">

    <div>
        <button id="lang">
          <i class="fas fa-globe"></i>
        </button>

        <div id="lang-popup">
          <ul>
            <li data-lang="de"><span class="flag">ğŸ‡©ğŸ‡ª</span><span class="lang-name">Deutschland</span></li>
            <li data-lang="fr"><span class="flag">ğŸ‡«ğŸ‡·</span><span class="lang-name">France</span></li>
            <li data-lang="hr"><span class="flag">ğŸ‡­ğŸ‡·</span><span class="lang-name">Hrvatska</span></li>
            <li data-lang="it"><span class="flag">ğŸ‡®ğŸ‡¹</span><span class="lang-name">Italia</span></li>
            <li data-lang="nl"><span class="flag">ğŸ‡³ğŸ‡±</span><span class="lang-name">Nederland</span></li>
            <li data-lang="no"><span class="flag">ğŸ‡³ğŸ‡´</span><span class="lang-name">Norge</span></li>
            <li data-lang="pl"><span class="flag">ğŸ‡µğŸ‡±</span><span class="lang-name">Polska</span></li>
            <li data-lang="se"><span class="flag">ğŸ‡¸ğŸ‡ª</span><span class="lang-name">Sverige</span></li>
            <li data-lang="gb"><span class="flag">ğŸ‡¬ğŸ‡§</span><span class="lang-name">United Kingdom</span></li>
            <li data-lang="us"><span class="flag">ğŸ‡ºğŸ‡¸</span><span class="lang-name">United States</span></li>
          </ul>
        </div>

        <h1>blÃ¥haj</h1>

        <img src="blahaj.png">
    </div>
    
    <div style="padding-top: 2%;">
        <a id="ikea-link" href="https://www.ikea.com/hr/hr/p/blahaj-plisana-igracka-morski-pas-30373588/">buy now</a>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        fetch("translations.json")
          .then(res => res.json())
          .then(translations => {
            const langBtn = document.getElementById('lang');
            const popup = document.getElementById('lang-popup');
            const ikeaLink = document.getElementById('ikea-link');

            const ikeaLinks = {
                hr: "https://www.ikea.com/hr/hr/p/blahaj-plisana-igracka-morski-pas-30373588/",
                de: "https://www.ikea.com/de/de/p/blahaj-stoffspielzeug-hai-30373588/",
                gb: "https://www.ikea.com/gb/en/p/blahaj-soft-toy-shark-30373588/",
                us: "https://www.ikea.com/us/en/p/blahaj-soft-toy-shark-90373590/",
                it: "https://www.ikea.com/it/it/p/blahaj-peluche-squalo-30373588/",
                nl: "https://www.ikea.com/nl/nl/p/blahaj-soft-toy-shark-30373588/",
                se: "https://www.ikea.com/se/sv/p/blahaj-mjukleksak-haj-30373588/",
                no: "https://www.ikea.com/no/no/p/blahaj-toyleke-hai-30373588/",
                pl: "https://www.ikea.com/pl/pl/p/blahaj-pluszak-rekin-30373588/",
                fr: "https://www.ikea.com/fr/fr/p/blahaj-peluche-requin-30373588/",
            };

            function setLang(lang) {
                document.body.setAttribute("lang", lang);
                localStorage.setItem("lang", lang);
                const t = translations[lang] || translations["us"];
                ikeaLink.innerText = t.buy;

                const countryCode = lang.toLowerCase();
                const fullLocale = navigator.language.toLowerCase();
                const link = ikeaLinks[fullLocale] || ikeaLinks[countryCode] || ikeaLinks["us"];
                ikeaLink.href = link;

                const langItems = popup.querySelectorAll('li');
                langItems.forEach(item => {
                    item.classList.remove('selected');
                    if (item.getAttribute('data-lang') === lang) {
                        item.classList.add('selected');
                    }
                });
            }

            langBtn.addEventListener('click', () => {
                popup.classList.toggle("show");
            });

            document.addEventListener('click', e => {
                if (!langBtn.contains(e.target) && !popup.contains(e.target)) {
                    popup.classList.remove("show");
                }
            });

            popup.querySelectorAll('li').forEach(item => {
                item.addEventListener('click', () => {
                    const selectedLang = item.getAttribute('data-lang');
                    setLang(selectedLang);
                    popup.classList.remove("show");
                });
            });

            const savedLang = localStorage.getItem("lang");
            if (savedLang) {
                setLang(savedLang);
            } else {
                fetch("https://ipapi.co/json/")
                    .then(res => res.json())
                    .then(data => {
                        const countryCode = data.country.toLowerCase();
                        const langMap = {
                            hr: "hr", de: "de", gb: "gb", us: "us", it: "it", nl: "nl",
                            se: "se", no: "no", pl: "pl", fr: "fr"
                        };
                        const lang = langMap[countryCode] || "de";
                        setLang(lang);
                    })
                    .catch(() => {
                        setLang("de");
                    });
            }
          });
      });
    </script>    
</body>
</html>
